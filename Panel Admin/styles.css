:root{
  --bg:#0a0b0f; --panel:#0f121a; --muted:#9aa4b2; --text:#e6edf3; --brand:#0ea5e9; --brand-2:#38bdf8;
  --ok:#22c55e; --warn:#f59e0b; --danger:#ef4444; --card:#0c1117; --border:#1b2330; --radius:18px;
  --shadow:0 10px 30px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.03);

  /* ===== Modal spacing vars ===== */
  --modal-pad-x: 20px;
  --modal-pad-y: 16px;
  --modal-head-h: 56px;
  --modal-foot-h: 64px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:'Space Grotesk',ui-sans-serif,system-ui;
  background:
    radial-gradient(1200px 800px at 70% -10%,rgba(14,165,233,.12),transparent 40%),
    radial-gradient(900px 600px at -10% 110%,rgba(56,189,248,.12),transparent 40%),
    var(--bg);
  color:var(--text);
}
a{color:var(--brand)}
.wrap{
  min-height:100vh;
  display:grid;
  place-items:center;
  place-content:center;
  padding:clamp(20px, 4vw, 32px);
  position:relative;
}

.view{
  width:min(100%, 1200px);
  margin-inline:auto;
}

/* Card base */
.card{
  width:100%;
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.00));
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  backdrop-filter: blur(8px);
}

/* Login */
#loginView{
  max-width:520px; padding:32px; position:relative; text-align:center;
  display:flex; flex-direction:column; align-items:center; gap:12px
}
#loginView .btn{width:100%}
#loginView .login-actions{width:100%; display:flex; flex-direction:column; gap:10px; align-items:stretch; text-align:center}
.btn-alt{width:100%; margin-top:8px}
#loginView .btn-admin-portal{
  background:linear-gradient(135deg, rgba(14,165,233,.24), rgba(56,189,248,.38));
  color:#e0f2fe;
  border:1px solid rgba(56,189,248,.45);
  box-shadow:0 14px 32px rgba(14,165,233,.28);
  transition:transform .12s ease, box-shadow .2s ease, background .2s ease;
}
#loginView .btn-admin-portal:hover{
  transform:translateY(-1px);
  box-shadow:0 18px 38px rgba(14,165,233,.32);
}
#loginView .btn-admin-portal:focus-visible{
  outline:3px solid rgba(56,189,248,.45);
  outline-offset:3px;
}
#loginView .btn-admin-portal .icon{font-size:1rem}
.brand{display:flex; flex-direction:column; align-items:center; gap:10px; margin-bottom:18px}
.brand .logo{
  width:140px; height:140px; display:grid; place-items:center; border-radius:18px;
  background: radial-gradient(40% 40% at 50% 50%, rgba(14,165,233,.18), transparent 70%);
  box-shadow:0 12px 38px rgba(14,165,233,.28); overflow:hidden;
}
.brand .logo img{width:100%; height:100%; object-fit:contain}
.brand h1{font-family:'Orbitron',ui-sans-serif; font-size:1.4rem; letter-spacing:.04em; margin:6px 0 0}
.muted{color:var(--muted); font-size:.92rem}

.field{display:grid; gap:6px; margin:12px 0; width:100%; text-align:left}
.field label{font-size:.88rem; color:#cdd6e1; letter-spacing:.01em; font-weight:600}
.input{border:1px solid var(--border); border-radius:14px; padding:12px 14px; background:#0b0f15; color:#fff; outline:none; width:100%}
.input:focus{border-color:var(--brand)}
.password-field .input-wrap{position:relative; display:flex; align-items:center}
.password-field .input{padding-right:120px}
.password-toggle{position:absolute; right:2px; display:inline-flex; align-items:center; gap:6px; padding:8px 12px; border-radius:10px; border:0; background:rgba(12,18,26,.85); color:#8fbfe6; font-size:.78rem; font-weight:600; letter-spacing:.02em; cursor:pointer; transition:color .2s ease, background .2s ease}
.password-toggle .icon{font-size:1rem}
.password-toggle:hover{color:#e0f2fe; background:rgba(24,32,45,.85)}
.password-toggle:focus-visible{outline:none}
.password-toggle[aria-pressed="true"]{color:#fef9c3; background:rgba(23,19,5,.65)}
.login-options{display:flex; align-items:center; justify-content:space-between; margin:2px 0 12px; gap:16px; flex-wrap:wrap}
.remember{display:inline-flex; align-items:center; gap:10px; font-size:.85rem; color:#cbd5f5; cursor:pointer; user-select:none}
.remember input{width:18px; height:18px; accent-color:var(--brand-2); border-radius:4px}
.input[aria-invalid="true"]{border-color:var(--danger); box-shadow:0 0 0 3px rgba(239,68,68,.15)}
#loginView .field{margin-top:10px}
#loginView .field:first-of-type{margin-top:0}

.btn{cursor:pointer; user-select:none; border:0; border-radius:14px; padding:12px 14px; font-weight:700; letter-spacing:.02em; display:inline-flex; align-items:center; justify-content:center; gap:8px}
.btn[disabled]{opacity:.6; cursor:not-allowed}
.btn-primary{background:linear-gradient(135deg, var(--brand), var(--brand-2)); color:#00131f; box-shadow:0 10px 25px rgba(14,165,233,.35)}
.btn-ghost{background:#0b0f15; color:#fff; border:1px solid var(--border)}
.btn-warning{background:rgba(245,158,11,.16); color:#facc15; border:1px solid rgba(245,158,11,.35)}
.btn-warning:hover{background:rgba(245,158,11,.25)}
.btn-warning:focus-visible{outline:2px solid rgba(245,158,11,.55)}
.btn-success{background:rgba(34,197,94,.18); color:#bbf7d0; border:1px solid rgba(34,197,94,.35)}
.btn-success:hover{background:rgba(34,197,94,.26)}
.btn-success:focus-visible{outline:2px solid rgba(34,197,94,.55)}
.btn-danger{background:rgba(239,68,68,.15); color:#fecaca; border:1px solid rgba(239,68,68,.35)}
.btn-danger:hover{background:rgba(239,68,68,.24)}
.btn-danger:focus-visible{outline:2px solid rgba(239,68,68,.55)}
.btn-sm{padding:8px 10px; font-size:.86rem; border-radius:12px}
.row{display:flex; gap:10px; align-items:center; flex-wrap:wrap}

.hint{margin-top:8px; color:var(--muted); font-size:.86rem}
.error{color:var(--danger); font-size:.9rem; margin-top:6px}

/* Admin layout */
#adminView{max-width:1200px; margin:0 auto; padding:0}
.header{
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 16px; border-bottom:1px solid var(--border)
}
.title{
  display:flex; gap:14px; align-items:center;
}
.title .logo{
  width:96px; height:64px; padding:6px; border-radius:14px; overflow:hidden;
  background: radial-gradient(40% 40% at 50% 50%, rgba(14,165,233,.18), transparent 70%);
  box-shadow:0 8px 22px rgba(14,165,233,.22);
  display:grid; place-items:center;
}
.title .logo img{width:100%; height:100%; object-fit:contain}
.title h2{font-family:'Orbitron'; margin:0; font-size:1.2rem; line-height:1.15}

/* === Toolbar base === */
.toolbar{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(180px, 1fr));
  gap:10px;
  width:100%;
  align-items:stretch;
}
.toolbar .search{
  grid-column:1 / -1;
  display:flex; gap:8px; min-width:0; align-items:center;
}
.toolbar .search .input{flex:1 1 auto; width:100%; min-width:0}
.toolbar .btn{width:100%; justify-content:center; display:inline-flex; align-items:center; gap:8px; font-weight:600}
.toolbar .icon{font-size:1rem}
.toolbar .btn-search{background:rgba(14,165,233,.16); color:#38bdf8; border:1px solid rgba(14,165,233,.35)}
.toolbar .btn-admin-portal{
  background:linear-gradient(135deg, rgba(14,165,233,.24), rgba(56,189,248,.38));
  color:#e0f2fe;
  border:1px solid rgba(56,189,248,.45);
  box-shadow:0 14px 32px rgba(14,165,233,.28);
  transition:transform .12s ease, box-shadow .2s ease, background .2s ease;
}
.toolbar .btn-admin-portal:hover{
  transform:translateY(-1px);
  box-shadow:0 18px 38px rgba(14,165,233,.32);
}
.toolbar .btn-admin-portal:focus-visible{
  outline:3px solid rgba(56,189,248,.45);
  outline-offset:3px;
}
.toolbar .btn-reload{background:rgba(59,130,246,.15); color:#93c5fd; border:1px solid rgba(59,130,246,.35)}
.toolbar .btn-logout{background:rgba(239,68,68,.18); color:#fca5a5; border:1px solid rgba(239,68,68,.45)}

/* Banda con el usuario actual (debajo del buscador) */
.current-user{
  grid-column: 1 / -1;
  display:flex;
  align-items:center;
  gap:6px; /* pegaditos nombre y correo en desktop */
  padding:8px 10px;
  border:1px solid var(--border);
  background:#0b0f15;
  border-radius:12px;
  color:#9fb4cc;
  font-size:.92rem;
  min-height:40px;
  flex-wrap:wrap;
}
.current-user .cu-title{ color:#cdd6e1; font-weight:700; flex:0 0 auto; }
.current-user .cu-name{
  color:#e6edf3; font-weight:700;
  flex:0 1 auto; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}
.current-user .cu-sep{ opacity:.7; flex:0 0 auto; }
.current-user .cu-email{
  color:#9cc6ff; font-weight:600;
  flex:0 1 auto; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}

.panel{padding:16px; position:relative; overflow-x:hidden}
.view-controls{
  margin:18px 0;
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.segment{
  display:inline-flex;
  align-items:center;
  background:#0b0f15;
  border:1px solid var(--border);
  border-radius:999px;
  overflow:hidden;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.04);
}
.segment__btn{
  border:0;
  background:transparent;
  color:var(--muted);
  padding:10px 18px;
  font-weight:700;
  font-size:.9rem;
  cursor:pointer;
  transition:background .18s ease, color .18s ease;
}
.segment__btn.is-active{
  background:rgba(14,165,233,.18);
  color:#e0f2fe;
}
.segment__btn:focus-visible{
  outline:2px solid rgba(56,189,248,.55);
  outline-offset:2px;
}

.blocked-drawer{
  margin-bottom:18px;
  padding:18px;
  border:1px solid var(--border);
  border-radius:16px;
  background:var(--card);
  box-shadow:var(--shadow);
  display:flex;
  flex-direction:column;
  gap:16px;
}
.blocked-drawer__head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:16px;
  flex-wrap:wrap;
}
.blocked-drawer__head h3{margin:0; font-size:1.05rem;}
.blocked-drawer__actions{display:flex; gap:10px; flex-wrap:wrap;}
.blocked-status{font-size:.9rem; display:flex; align-items:center; gap:8px;}
.blocked-status::before{
  content:"";
  width:12px;
  height:12px;
  border-radius:50%;
  border:2px solid currentColor;
  border-right-color:transparent;
  animation:spin .8s linear infinite;
}
.blocked-list{display:grid; gap:12px;}
.blocked-card{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:12px;
  border:1px solid var(--border);
  border-radius:14px;
  padding:12px 14px;
  background:#0b1117;
}
.blocked-card__info{display:flex; flex-direction:column; gap:4px;}
.blocked-card__info .email{font-weight:700; color:#e6edf3;}
.blocked-card__info .name{color:var(--muted); font-size:.9rem;}
.blocked-card__info .meta-line{font-size:.78rem; color:var(--muted); display:flex; gap:6px; flex-wrap:wrap;}
.blocked-card__info .meta-line strong{color:#e6edf3;}
.blocked-card__info .detail-line{font-size:.78rem; color:var(--muted);}
.blocked-card__dates{font-size:.85rem; color:var(--muted); text-align:right; display:flex; flex-direction:column; gap:4px;}
.blocked-empty{font-size:.9rem;}

@media (max-width: 720px){
  .view-controls{justify-content:center;}
  .blocked-card{flex-direction:column; align-items:flex-start;}
  .blocked-card__dates{text-align:left;}
}
.account-panel{padding:20px 22px 6px; border-bottom:1px solid var(--border)}
.account-card{display:grid; gap:18px; background:var(--card); border:1px solid var(--border); border-radius:16px; padding:20px; box-shadow:var(--shadow)}
.account-card__head{display:flex; align-items:flex-start; justify-content:space-between; gap:16px}
.account-card__head h3{margin:0; font-size:1.1rem}
.account-card__head .muted{margin-top:4px; font-size:.85rem}
.account-card__tag{border-radius:999px; padding:6px 12px; background:rgba(34,197,94,.15); color:#86efac; font-weight:700; font-size:.8rem; border:1px solid rgba(34,197,94,.35)}
.account-card__tag.warn{background:rgba(245,158,11,.18); color:#facc15; border-color:rgba(245,158,11,.4)}
.plan-cell{display:inline-flex; align-items:center; gap:8px; flex-wrap:wrap}
.plan-cell .tag{flex:0 0 auto}
.tag-blocked{background:rgba(239,68,68,.16); color:#fecaca; border:1px solid rgba(239,68,68,.35)}
.tag-blocked::before{content:'⛔'; margin-right:4px}
.account-card__tag.danger{background:rgba(239,68,68,.18); color:#fecaca; border-color:rgba(239,68,68,.45)}
.account-card__body{display:flex; flex-wrap:wrap; gap:20px; align-items:center; justify-content:space-between}
.account-user{display:flex; align-items:center; gap:12px; min-width:220px}
.account-user__icon{width:64px; height:64px; border-radius:18px; border:1px solid var(--border); background:rgba(59,130,246,.18); display:grid; place-items:center; font-size:2rem}
.account-user__info{display:grid; gap:4px}
.account-user__name{font-size:1.05rem; font-weight:700}
.account-user__email{color:#8fbfe6; font-size:.9rem; word-break:break-all}
.account-metrics{display:flex; gap:18px; flex-wrap:wrap; justify-content:flex-end}
.account-metric{min-width:160px; background:rgba(15,18,26,.85); border:1px solid var(--border); border-radius:14px; padding:14px 16px; display:grid; gap:6px; text-align:left}
.account-metric .label{font-size:.8rem; color:var(--muted)}
.account-metric strong{font-size:1.1rem}
.account-metric .sub{font-size:.78rem; color:#8fbfe6}
.account-actions{display:flex; gap:12px; flex-wrap:wrap; margin-top:16px; width:100%; justify-content:flex-end}
.account-action{display:inline-flex; align-items:center; gap:8px; font-weight:600}
.account-action .icon{font-size:1.1rem}

@media (max-width:768px){
  .account-card__body{flex-direction:column; align-items:flex-start}
  .account-metrics{width:100%; justify-content:flex-start}
  .account-metric{width:100%}
  .account-actions{justify-content:flex-start}
}
.stats{display:flex; gap:16px; flex-wrap:wrap; margin-bottom:18px; justify-content:center}
.stat-card{flex:1 1 280px; min-width:260px; display:flex; align-items:center; gap:12px; background:var(--card); border:1px solid var(--border); border-radius:14px; padding:18px; box-shadow:var(--shadow)}
.stat-icon{width:42px; height:42px; border-radius:12px; display:grid; place-items:center; font-size:1.3rem; background:rgba(14,165,233,.14); color:#38bdf8}
.stat-body{display:grid; gap:4px}
.stat-title{font-size:.85rem; color:var(--muted)}
.stat-value{font-size:1.2rem; font-weight:700}
.stat-sub{font-size:.8rem; color:#8fbfe6}

/* overlay loading */
.overlay{
  position:absolute; inset:0; display:none; place-items:center;
  background:rgba(0,0,0,.25); backdrop-filter: blur(2px); border-radius:var(--radius);
}
.overlay.show{display:grid}
.spinner{padding:10px 14px; border:1px solid var(--border); background:var(--panel); border-radius:12px; color:#8fbfe6}

.session-overlay{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(10,11,15,.45);
  backdrop-filter: blur(6px); z-index:90; opacity:0; transition:opacity .28s ease;
}
.session-overlay.show{display:flex; opacity:1}
.session-box{
  padding:16px 20px; border-radius:16px; border:1px solid var(--border); background:rgba(12,17,23,.85);
  box-shadow:var(--shadow); display:flex; align-items:center; gap:12px; font-weight:600; color:#8fbfe6
}
.session-box .loader{width:18px; height:18px; border-radius:50%; border:3px solid rgba(56,189,248,.4);
  border-top-color:var(--brand-2); animation:spin .8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* Table (desktop) */
.table-wrap{width:100%; overflow:auto; padding-bottom:6px}
table{width:100%; border-collapse:separate; border-spacing:0 10px; min-width:940px}
thead th{font-size:.85rem; text-align:left; color:#cdd6e1; padding:0 10px; white-space:nowrap}
tbody tr{background:var(--card); border:1px solid var(--border)}
tbody td{padding:12px 10px; vertical-align:middle}
tbody td:first-child{border-radius:12px 0 0 12px}
tbody td:last-child{border-radius:0 12px 12px 0}
tbody tr{transition:transform .12s ease, box-shadow .12s ease}
tbody tr:hover{transform:translateY(-2px); box-shadow:0 10px 16px rgba(0,0,0,.25)}
tbody tr td{border-top:1px solid rgba(255,255,255,.03); border-bottom:1px solid rgba(0,0,0,.25)}

/* Avatar con logo */
.avatar{
  width:36px; height:36px; border-radius:10px; border:1px solid var(--border);
  background:#0b0f15; display:grid; place-items:center; overflow:hidden;
}
.avatar img{width:100%; height:100%; object-fit:contain}

.tag{font-size:.75rem; padding:4px 8px; border-radius:999px; border:1px solid var(--border); background:#0a0f15; color:#b7c3d1}
.actions{display:flex; gap:8px; flex-wrap:wrap; justify-content:center}
.credit-badge{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:6px; font-size:.8rem; font-weight:600; letter-spacing:.01em; border:1px solid transparent; flex-wrap:wrap; justify-content:flex-start}
.credit-badge .dot{width:10px; height:10px; border-radius:50%; display:inline-block}
.credit-low{background:rgba(239,68,68,.12); color:#fecaca; border-color:rgba(239,68,68,.35)}
.credit-low .dot{background:var(--danger)}
.credit-medium{background:rgba(245,158,11,.12); color:#fde68a; border-color:rgba(245,158,11,.3)}
.credit-high{background:rgba(34,197,94,.15); color:#bbf7d0; border-color:rgba(34,197,94,.35)}
.credit-high .dot{background:var(--ok)}
.credit-warning{margin-top:6px; padding:8px 10px; border-radius:12px; font-size:.78rem; background:rgba(239,68,68,.1); border:1px solid rgba(239,68,68,.3); color:#fecaca}
.credit-warning.highlight-alert{box-shadow:0 0 0 3px rgba(239,68,68,.35); animation:pulse-alert 1.2s ease-in-out 0s 2}
.table-wrap tr.row-alert{position:relative}
.table-wrap tr.row-alert::after{content:''; position:absolute; inset:0; border-left:3px solid rgba(239,68,68,.6); border-radius:6px; pointer-events:none}
.card-row.row-alert{border:1px solid rgba(239,68,68,.35)}

@keyframes pulse-alert{
  0%,100%{transform:scale(1);}
  50%{transform:scale(1.02);}
}
.pager{display:flex; gap:10px; align-items:center; justify-content:flex-end; margin-top:10px}

.view{opacity:0; transform:translateY(14px); transition:opacity .28s ease, transform .28s ease; pointer-events:none}
.view.active{opacity:1; transform:none; pointer-events:auto}

/* Empty + skeletons */
.empty{display:grid; place-items:center; padding:26px; color:var(--muted)}
.skeleton{background:linear-gradient(90deg, #0d131b, #101720, #0d131b); background-size:200% 100%; animation:shimmer 1.2s infinite; height:48px; border-radius:12px; margin:8px 0; border:1px solid var(--border)}
@keyframes shimmer{0%{background-position:200% 0} 100%{background-position:-200% 0}}

/* Cards (móvil) — por defecto ocultas en desktop */
.cards{display:none}
.label{font-size:.75rem; color:#9aa4b2}

/* ======== Pantallas pequeñas (móvil/tablet) ======== */
@media (max-width: 820px){
  body{
    background:
      radial-gradient(1200px 800px at 48% -16%, rgba(14,165,233,.12), transparent 40%),
      radial-gradient(900px 600px at -22% 114%, rgba(56,189,248,.12), transparent 40%),
      var(--bg);
  }
  .wrap{padding:20px 16px}
  .view{width:min(560px, 96vw)}
  .panel{padding:16px 14px 26px}
  .header{flex-direction:column; align-items:center; gap:12px; text-align:center}
  .title{align-items:center; justify-content:center}

  /* === CENTRADO REAL DEL LOGO EN MÓVIL === */
  .title .logo{
    width:88px; height:60px;
    padding:0;                       /* sin padding para centrar perfecto */
    display:flex; align-items:center; justify-content:center;
    margin-inline:auto;
  }
  .title .logo img{
    display:block;
    width:82%;                       /* escala interna estable */
    height:82%;
    object-fit:contain;
    object-position:center center;   /* centrado visual */
  }

  /* Tabla fuera; cards visibles y centradas */
  .table-wrap{display:none}
  .cards{
    display:grid; gap:12px; justify-content:center; justify-items:center; width:100%;
  }
  .card-row{
    background:var(--card); border:1px solid var(--border); border-radius:14px;
    padding:14px; display:grid; gap:10px; width:100%; max-width:520px; margin:0 auto;
  }
  .row-top{display:flex; align-items:center; gap:10px; justify-content:space-between}
  .row-mid{display:grid; gap:8px; grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}
  .row-actions{display:flex; gap:8px; flex-wrap:wrap}

  .pager{justify-content:center}
  .empty{place-items:center; text-align:center}

  /* Toolbar y banda usuario ordenadas */
  .toolbar{ row-gap:8px; }
  .current-user{ gap:6px; padding:8px 10px; }
  .current-user .cu-name,
  .current-user .cu-email{
    flex:1 1 100%;
    min-width:0;
    white-space:normal;
    overflow:visible;
    text-overflow:clip;
    word-break:break-word;
    overflow-wrap:anywhere;
  }
}

/* ======== Micro: ultra-chicos (≤480px) ======== */
@media (max-width: 480px){
  .toolbar{grid-template-columns:1fr; gap:8px}
  .title .logo{ width:84px; height:58px; }
  .title .logo img{ width:82%; height:82%; }
  .current-user{ padding:8px; }
}

/* ===== Toolbar desktop/tablet ≥640px:
   Fila 1 = buscador + botones ; Fila 2 = banda usuario a lo ancho ===== */
@media (min-width: 640px){
  .toolbar{
    display:grid;
    grid-template-columns: 1fr auto auto auto; /* búsqueda | btn | btn | btn */
    grid-auto-rows: minmax(42px, auto);
    align-items:start;
    column-gap:12px;
    row-gap:10px;
  }
  .toolbar .search{
    grid-column:1 / 2; display:flex; gap:8px; min-width:0;
  }
  .toolbar .search .input{ min-width:0; }
  .toolbar .btn{
    width:auto; min-width:max-content; justify-content:center; align-self:start;
  }
  .toolbar .current-user{
    grid-column:1 / -1;
    grid-row:2;
    margin-top:2px;
    flex-wrap:nowrap;
  }
}

/* ===== Fix desbordes específico móvil ≤640px ===== */
@media (max-width: 640px){
  .toolbar{
    display:grid;
    grid-template-columns:1fr;
    row-gap:8px;
    column-gap:0;
    align-items:stretch;
  }
  .toolbar > *{ min-width:0; }
  .toolbar .search{ min-width:0; display:flex; gap:8px; }
  .toolbar .search .input{ flex:1 1 auto; width:100%; min-width:0; }
  .toolbar .btn{
    width:100%;
    min-width:0;
    max-width:100%;
    align-self:stretch;
  }
  .current-user .cu-sep{ display:none; } /* evita quedarla sola en una línea */
}

/* ======== MODAL FIJO Y SCROLL-SEGURO + PADDING ======== */
.modal{
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  padding: 20px;
  background: rgba(0,0,0,.45);
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
  z-index: 9999;
}
.modal .content{
  width: min(560px, 96vw);
  max-height: 90vh;
  overflow: auto;
  border-radius: 18px;
  border: 1px solid var(--border);
  background: var(--panel);
  box-shadow: var(--shadow);
  padding-left: var(--modal-pad-x);
  padding-right: var(--modal-pad-x);
}
.modal .head,
.modal .foot{
  position: sticky;
  background: rgba(12,17,23,.95);
  backdrop-filter: blur(4px);
  z-index: 1;
  padding: 12px var(--modal-pad-x);
}
.modal .head{
  top: 0;
  min-height: var(--modal-head-h);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.modal .body{
  padding: var(--modal-pad-y) 0;
  padding-bottom: calc(var(--modal-pad-y) + var(--modal-foot-h));
}
.modal .foot{
  bottom: 0;
  min-height: var(--modal-foot-h);
  border-top: 1px solid var(--border);
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

/* ======== MODAL: BLOQUEO USUARIOS ======== */
.block-modal__head{display:flex; flex-direction:column; gap:4px; max-width:100%;}
.block-modal__subtitle{font-size:.9rem; color:var(--muted); font-weight:500; word-break:break-word;}
.block-modal__intro{margin:0 0 18px; color:var(--muted); line-height:1.45;}
.block-modal__group{display:grid; gap:10px; margin-bottom:20px;}
.group-label{font-size:.9rem; font-weight:700; color:#cdd6e1; letter-spacing:.01em;}
.block-duration-options{display:flex; flex-wrap:wrap; gap:8px;}
.chip{display:inline-flex; align-items:center; gap:8px; padding:8px 14px; border-radius:999px; border:1px solid var(--border); background:#0b0f15; color:#d1d9e6; font-size:.85rem; font-weight:600; cursor:pointer; transition:all .2s ease;}
.chip:hover{border-color:rgba(56,189,248,.35); color:#e0f2fe;}
.chip input{appearance:none; width:16px; height:16px; border-radius:50%; border:1px solid rgba(148,163,184,.6); background:#090d14; display:grid; place-items:center; position:relative;}
.chip input::after{content:''; width:8px; height:8px; border-radius:50%; background:var(--brand); opacity:0; transform:scale(.45); transition:transform .18s ease, opacity .18s ease;}
.chip input:checked::after{opacity:1; transform:scale(1);}
.chip input:checked + span{color:#38bdf8;}
.chip span{pointer-events:none;}
.chip-btn{border-radius:12px; font-size:.82rem; font-weight:700;}
.chip-btn:hover{background:rgba(56,189,248,.15); border-color:rgba(56,189,248,.4); color:#38bdf8;}
.chip-btn:active{transform:translateY(1px);}
.chip-btn:focus-visible{outline:2px solid rgba(56,189,248,.5); outline-offset:2px;}
.block-duration-amount{display:grid; gap:6px;}
.block-duration-amount .hint{margin-top:0; font-size:.8rem;}
.block-quick{display:grid; gap:8px;}
.block-quick__grid{display:flex; flex-wrap:wrap; gap:8px;}
.block-manual-label{font-size:.85rem; color:#cdd6e1; font-weight:600;}
.block-summary{margin-top:24px; display:grid; gap:12px; grid-template-columns:repeat(auto-fit, minmax(180px,1fr)); padding:16px; border:1px solid var(--border); border-radius:14px; background:#0b0f15;}
.block-summary .label{display:block; font-size:.78rem; text-transform:uppercase; letter-spacing:.08em; color:#9aa4b2; margin-bottom:4px;}
.block-summary strong{font-size:1rem; color:#e6edf3; font-weight:700; word-break:break-word;}

@media (max-width: 640px){
  .block-summary{grid-template-columns:1fr;}
  .block-modal__intro{font-size:.9rem;}
}

/* Pequeños: ajustamos padding/alturas para respirar mejor */
@media (max-width: 820px){
  :root{
    --modal-pad-x: 16px;
    --modal-pad-y: 14px;
    --modal-head-h: 52px;
    --modal-foot-h: 60px;
  }
}
